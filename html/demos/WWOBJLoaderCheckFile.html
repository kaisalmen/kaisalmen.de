<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>OBJLoader Testbed</title>
</head>
<body>
    <link href="../../resource/css/AppLifecyle.css" type="text/css" rel="stylesheet"/>
    <link href="../../resource/css/Navigation.css" type="text/css" rel="stylesheet"/>

    <div id="master">
        <div id="DivGLFull">
            <canvas id="DivGLFullCanvas"></canvas>
        </div>
        <div class="navFrame">
            <div class="home">
                <h1>
                    <a href="../../index.html">Home</a>
                </h1>
            </div>
        </div>
        <div class="feedback" id="FeedbackArea">
            <div class="copyrightArea" id="CopyrightArea">
                Featuring OBJ model male02 from three.js examples
            </div>
        </div>
    </div>
    <script src="../../js/apps/core/PlatformVerification.js"></script>
    <script src="../../node_modules/three/build/three.min.js"></script>
    <script src="../../node_modules/three/examples/js/libs/stats.min.js"></script>
    <script src="../../node_modules/three/examples/js/controls/TrackballControls.js"></script>
    <script src="../../node_modules/three/examples/js/loaders/MTLLoader.js"></script>
    <script src="../../node_modules/wwobjloader2/build/OBJLoader2.js"></script>
    <script src="../../node_modules/wwobjloader2/build/WWOBJLoader2.js"></script>
    <script src="../../node_modules/wwobjloader2/test/wwobjloader2/WWOBJLoader2Example.js"></script>

    <script src="../../js/apps/tools/UiTools.js"></script>

    <script>
        if ( KSX.globals.preChecksOk ) {

            var app = new WWOBJLoader2Example( document.getElementById( 'DivGLFullCanvas' ) );

            var uiTools = new KSX.apps.tools.UiTools({
                useStats: true
            });

            // init three.js example application
            var resizeWindow = function () {
                app.resizeDisplayGL();
            };

            var render = function () {
                requestAnimationFrame( render );
                app.render();
                uiTools.updateStats();
            };

            window.addEventListener( 'resize', resizeWindow, false );

            console.log( 'Starting initialisation phase...' );
            uiTools.createFeedbackAreaDynamic();
            uiTools.announceFeedback( 'Initializing' );
            uiTools.enableStats();

            app.initGL();
            app.resizeDisplayGL();
            app.initPostGL();

            var reportProgress = function( text ) {
                uiTools.announceFeedback( text );
            };
            app.wwObjLoader2.registerCallbackProgress( reportProgress );


            var prepData = new THREE.OBJLoader2.WWOBJLoader2.PrepDataFile(
                'male02',
                '../../resource/models/male02/',
                'male02.obj',
                '../../resource/models/male02/',
                'male02.mtl'
            );
            app.loadFiles( prepData );

            // kick render loop
            render();

        }
    </script>
</body>
</html>